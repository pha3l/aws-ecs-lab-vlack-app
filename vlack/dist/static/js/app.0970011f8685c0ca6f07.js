webpackJsonp([1],{0:function(e,n){},"0bRM":function(e,n){},1:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=t("7+uW"),a=t("NYxO"),o={name:"App",data:function(){return{userName:""}},computed:{channels:function(){return this.$store.state.channels},user:function(){return this.$store.state.user}},created:function(){var e=window.sessionStorage.getItem("vlackUser");e&&this.$store.commit("setUser",e),this.getChannels()},methods:{getChannels:function(){var e=this;this.$axios.get("/channel").then(function(n){e.$store.commit("setChannels",n.data)})},login:function(){this.$store.commit("setUser",this.userName)}}},r={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[e.user?[t("div",{staticClass:"sidebar"},[t("h3",[e._v(e._s(e.user))]),e._v(" "),t("h4",[e._v("Channels")]),e._v(" "),t("router-link",{staticClass:"new-channel-link",attrs:{to:"/channel/new"}},[t("i",{staticClass:"fas fa-plus-square"})]),e._v(" "),e._l(e.channels,function(n){return t("router-link",{key:n.id,attrs:{to:{name:"Channel",params:{id:n.id}}}},[e._v("\n        # "+e._s(n.name)+"\n      ")])})],2),e._v(" "),t("div",{staticClass:"content"},[t("router-view")],1)]:[t("div",{staticClass:"sign-in-form"},[t("h1",[e._v("Sign In")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text"},domProps:{value:e.userName},on:{input:function(n){n.target.composing||(e.userName=n.target.value)}}}),t("br"),e._v(" "),t("button",{attrs:{disabled:""===e.userName},on:{click:function(n){e.login()}}},[e._v("Login")])])]],2)},staticRenderFns:[]},i=t("VU/8")(o,r,!1,null,null,null).exports,c=t("/ocq"),l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[this._v("Welcome To Vlack!")])])}]},u=t("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,null,null,null).exports,h={name:"ChannelForm",data:function(){return{channelName:""}},created:function(){console.log(this.$store)},methods:{createChannel:function(){var e=this;this.$axios.post("/channel",{Name:this.channelName}).then(function(n){e.$store.commit("addChannel",n.data),e.$router.push("/")})}}},m={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"new-channel-form"},[t("h1",[e._v("New Channel: "+e._s(e.channelName))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.channelName,expression:"channelName"}],attrs:{type:"text"},domProps:{value:e.channelName},on:{input:function(n){n.target.composing||(e.channelName=n.target.value)}}}),e._v(" "),t("button",{attrs:{disabled:""===e.channelName},on:{click:e.createChannel}},[e._v("Create")])])},staticRenderFns:[]},d=t("VU/8")(h,m,!1,null,null,null).exports,p={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"message",class:{starred:e.message.starred}},[t("b",[e._v(e._s(e.message.user))]),e._v(" "),t("span",[e._v(e._s(e.message.createdAt))]),e._v(" "),t("p",[e._v(e._s(e.message.body))]),e._v(" "),t("a",{on:{click:e.star}},[t("i",{staticClass:"far fa-star"})])])},staticRenderFns:[]},v={name:"Channel",data:function(){return{name:null,id:null,messages:[],newMessage:"",socketConnection:null}},watch:{$route:function(){this.getChannel()},messages:function(){var e=this;setTimeout(function(){e.$el.querySelector(".messages").scrollTo(0,1e7)},100)}},created:function(){this.getChannel()},beforeRouteUpdate:function(e,n,t){this.socketConnection.stop(),t()},beforeRouteLeave:function(e,n,t){this.socketConnection.stop(),t()},methods:{setupSocket:function(){var e=this,n=this.$signalR.TransportType.WebSockets,t=Object({NODE_ENV:"production"}).WS_ENDPOINT+"?channel_id=";this.socketConnection=new this.$signalR.HubConnection(t+this.id,{transport:n}),this.socketConnection.on("broadcastMessage",function(n,t){e.messages.push(t)}),this.socketConnection.start()},createMessage:function(){var e=this;if(""!==this.newMessage){var n={user:this.$store.state.user,body:this.newMessage,ChannelId:this.id};this.$axios.post("/message",n).then(function(n){e.newMessage=""})}},getChannel:function(){var e=this;this.$axios.get("/channel/"+this.$route.params.id).then(function(n){e.name=n.data.name,e.id=n.data.id,e.messages=n.data.messages,e.setupSocket()})},starMessage:function(e){this.messages[e].starred=!0}},components:{message:t("VU/8")({name:"Message",props:["message"],methods:{star:function(){this.$emit("star")}}},p,!1,null,null,null).exports}},f={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel"},[t("div",{staticClass:"channel-header"},[t("h3",[e._v("# "+e._s(e.name))])]),e._v(" "),t("div",{staticClass:"messages"},e._l(e.messages,function(n,s){return t("message",{key:n.id,attrs:{message:n},on:{star:function(n){e.starMessage(s)}}})})),e._v(" "),t("div",{staticClass:"new-message"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{placeholder:"New Message in #"+e.name},domProps:{value:e.newMessage},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key))return null;n.preventDefault(),e.createMessage()},input:function(n){n.target.composing||(e.newMessage=n.target.value)}}})])])},staticRenderFns:[]},g=t("VU/8")(v,f,!1,null,null,null).exports;s.a.use(c.a);var _=new c.a({routes:[{path:"/",name:"HelloWorld",component:u},{path:"/channel/new",name:"ChannelForm",component:d},{path:"/channel/:id",name:"Channel",component:g}]}),C=t("mtWM"),w=t.n(C),N=t("XujC"),$={state:{channels:[],user:null},mutations:{setChannels:function(e,n){e.channels=n},addChannel:function(e,n){e.channels.push(n)},setUser:function(e,n){e.user=n,window.sessionStorage.setItem("vlackUser",n)},clearUser:function(e){window.sessionStorage.clear("vlackUser")}}};s.a.prototype.$axios=w.a.create({baseURL:Object({NODE_ENV:"production"}).HTTP_ENDPOINT}),s.a.prototype.$signalR=N,t("0bRM"),s.a.config.productionTip=!1,s.a.use(a.a);var k=new a.a.Store($);new s.a({el:"#app",router:_,store:k,components:{App:i},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.0970011f8685c0ca6f07.js.map